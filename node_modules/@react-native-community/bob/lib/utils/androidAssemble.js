"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = androidAssemble;

var _path = _interopRequireDefault(require("path"));

var _chalk = _interopRequireDefault(require("chalk"));

var _fsExtra = _interopRequireDefault(require("fs-extra"));

var _child_process = require("child_process");

var _os = require("os");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

async function androidAssemble({
  root,
  androidPath,
  report
}) {
  const cwd = _path.default.relative(root, androidPath);

  report.info(`Assembling Android project in ${_chalk.default.blue(cwd)} with ${_chalk.default.blue('gradle')}`);
  const gradleWrapper = './gradlew' + ((0, _os.platform)() === 'win32' ? './gradlew.bat' : '');

  if (await _fsExtra.default.pathExists(_path.default.join(androidPath, gradleWrapper))) {
    (0, _child_process.execFileSync)(gradleWrapper, ['assemble'], {
      cwd: androidPath
    });
  } else {
    throw new Error(`The ${_chalk.default.blue('gradlew')} script doesn't seem to present in ${_chalk.default.blue(androidPath)}. Make sure you have added it by running ${_chalk.default.blue('gradle wrapper')} in that directory.`);
  }
}
//# sourceMappingURL=androidAssemble.js.map