{"version":3,"sources":["../../src/utils/androidAssemble.ts"],"names":["androidAssemble","root","androidPath","report","cwd","path","relative","info","chalk","blue","gradleWrapper","fs","pathExists","join","Error"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;;;AASe,eAAeA,eAAf,CAA+B;AAC5CC,EAAAA,IAD4C;AAE5CC,EAAAA,WAF4C;AAG5CC,EAAAA;AAH4C,CAA/B,EAIH;AACV,QAAMC,GAAG,GAAGC,cAAKC,QAAL,CAAcL,IAAd,EAAoBC,WAApB,CAAZ;;AAEAC,EAAAA,MAAM,CAACI,IAAP,CACG,iCAAgCC,eAAMC,IAAN,CAAWL,GAAX,CAAgB,SAAQI,eAAMC,IAAN,CACvD,QADuD,CAEvD,EAHJ;AAMA,QAAMC,aAAa,GACjB,eAAe,wBAAe,OAAf,GAAyB,eAAzB,GAA2C,EAA1D,CADF;;AAEA,MAAI,MAAMC,iBAAGC,UAAH,CAAcP,cAAKQ,IAAL,CAAUX,WAAV,EAAuBQ,aAAvB,CAAd,CAAV,EAAgE;AAC9D,qCAAaA,aAAb,EAA4B,CAAC,UAAD,CAA5B,EAA0C;AAAEN,MAAAA,GAAG,EAAEF;AAAP,KAA1C;AACD,GAFD,MAEO;AACL,UAAM,IAAIY,KAAJ,CACH,OAAMN,eAAMC,IAAN,CACL,SADK,CAEL,sCAAqCD,eAAMC,IAAN,CACrCP,WADqC,CAErC,4CAA2CM,eAAMC,IAAN,CAC3C,gBAD2C,CAE3C,qBAPE,CAAN;AASD;AACF","sourcesContent":["import path from 'path';\nimport chalk from 'chalk';\nimport fs from 'fs-extra';\nimport { execFileSync } from 'child_process';\nimport { platform } from 'os';\nimport type { Report } from '../types';\n\ntype Options = {\n  root: string;\n  androidPath: string;\n  report: Report;\n};\n\nexport default async function androidAssemble({\n  root,\n  androidPath,\n  report,\n}: Options) {\n  const cwd = path.relative(root, androidPath);\n\n  report.info(\n    `Assembling Android project in ${chalk.blue(cwd)} with ${chalk.blue(\n      'gradle'\n    )}`\n  );\n\n  const gradleWrapper =\n    './gradlew' + (platform() === 'win32' ? './gradlew.bat' : '');\n  if (await fs.pathExists(path.join(androidPath, gradleWrapper))) {\n    execFileSync(gradleWrapper, ['assemble'], { cwd: androidPath });\n  } else {\n    throw new Error(\n      `The ${chalk.blue(\n        'gradlew'\n      )} script doesn't seem to present in ${chalk.blue(\n        androidPath\n      )}. Make sure you have added it by running ${chalk.blue(\n        'gradle wrapper'\n      )} in that directory.`\n    );\n  }\n}\n"],"file":"androidAssemble.js"}