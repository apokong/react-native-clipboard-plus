{"version":3,"sources":["../../src/utils/jetifier.ts"],"names":["jetifier","root","input","output","reverse","jetifierStandalone","path","join","fs","pathExists","args","push","Error","chalk","blue"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;AAWe,eAAeA,QAAf,CAAwB;AACrCC,EAAAA,IADqC;AAErCC,EAAAA,KAFqC;AAGrCC,EAAAA,MAHqC;AAIrCC,EAAAA;AAJqC,CAAxB,EAKH;AACV,QAAMC,kBAAkB,GAAGC,cAAKC,IAAL,CACzBN,IADyB,EAEzB,cAFyB,EAGzB,MAHyB,EAIzB,qBAJyB,CAA3B;;AAOA,MAAI,MAAMO,iBAAGC,UAAH,CAAcJ,kBAAd,CAAV,EAA6C;AAC3C,UAAMK,IAAI,GAAG,CAAC,IAAD,EAAOR,KAAP,EAAc,IAAd,EAAoBC,MAApB,CAAb;;AACA,QAAIC,OAAJ,EAAa;AACXM,MAAAA,IAAI,CAACC,IAAL,CAAU,IAAV;AACD;;AAED,qCAAaN,kBAAb,EAAiCK,IAAjC;AACD,GAPD,MAOO;AACL,UAAM,IAAIE,KAAJ,CACH,OAAMC,eAAMC,IAAN,CACL,UADK,CAEL,8CAA6CD,eAAMC,IAAN,CAC7C,cAD6C,CAE7C,8BAA6BD,eAAMC,IAAN,CAC7B,UAD6B,CAE7B,YAAWD,eAAMC,IAAN,CAAW,iBAAX,CAA8B,GAPvC,CAAN;AASD;AACF","sourcesContent":["import path from 'path';\nimport chalk from 'chalk';\nimport { execFileSync } from 'child_process';\nimport fs from 'fs-extra';\nimport type { Report } from '../types';\n\ntype Options = {\n  root: string;\n  input: string;\n  output: string;\n  reverse: boolean;\n  report: Report;\n};\n\nexport default async function jetifier({\n  root,\n  input,\n  output,\n  reverse,\n}: Options) {\n  const jetifierStandalone = path.join(\n    root,\n    'node_modules',\n    '.bin',\n    'jetifier-standalone'\n  );\n\n  if (await fs.pathExists(jetifierStandalone)) {\n    const args = ['-i', input, '-o', output];\n    if (reverse) {\n      args.push('-r');\n    }\n\n    execFileSync(jetifierStandalone, args);\n  } else {\n    throw new Error(\n      `The ${chalk.blue(\n        'jetifier'\n      )} binary doesn't seem to be installed under ${chalk.blue(\n        'node_modules'\n      )}. Make sure you have added ${chalk.blue(\n        'jetifier'\n      )} to your ${chalk.blue('devDependencies')}.`\n    );\n  }\n}\n"],"file":"jetifier.js"}