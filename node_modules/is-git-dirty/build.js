'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _os = require('os');

var _execa = require('execa');

var _execa2 = _interopRequireDefault(_execa);

var _isGitRepository = require('is-git-repository');

var _isGitRepository2 = _interopRequireDefault(_isGitRepository);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var cwd = process.cwd();

var isGitClean = function isGitClean() {
  var altPath = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : cwd;

  var stdout = void 0;

  if (!(0, _isGitRepository2.default)(altPath)) {
    return null;
  }

  try {
    if ((0, _os.platform)() === 'win32') {
      var _execa$shellSync = _execa2.default.shellSync('pushd ' + altPath + ' & git status --short');

      stdout = _execa$shellSync.stdout;
    } else {
      var _execa$shellSync2 = _execa2.default.shellSync('(cd ' + altPath + ' ; git status --short)');

      stdout = _execa$shellSync2.stdout;
    }

    return stdout.length > 0;
  } catch (e) {
    return null;
  }
};

exports.default = isGitClean;
module.exports = exports['default'];
